84.201.135.21
http://84.201.135.21:3000/users
ssh roge97@84.201.135.21
frontend: roge.nomoredomains.sbs
http://roge.nomoredomains.sbs
backend: api.roge.nomoredomains.sbs

curl -sL https://deb.nodesource.com/setup_16.x | sudo -E bash -
sudo apt install -y nodejs
wget -qO - https://www.mongodb.org/static/pgp/server-6.0.asc | sudo apt-key add -
echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/6.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-6.0.list
sudo apt-get update
sudo apt-get install -y mongodb-org
sudo service mongod start
sudo systemctl enable mongod.service
mongosh
sudo apt install -y git
git --version
npm install
npm start
sudo npm install pm2 -g
pm2 start app.js
pm2 startup
7Примерно To setup the Startup Script, copy/paste the following command:
sudo env PATH=$PATH:/usr/bin /usr/lib/node_modules/pm2/bin/pm2 startup systemd -u praktikum --hp /home/praktikum
pm2 save
sudo apt update
sudo apt install -y nginx
sudo ufw allow 'Nginx Full'
sudo ufw allow OpenSSH
sudo ufw enable
sudo systemctl enable --now nginx
ропукскаем sudo ln -s /etc/nginx/sites-available/<имя_конфига> /etc/nginx/sites-enabled/<имя_конфига>
sudo nano /etc/nginx/sites-available/default
/etc/nginx/sites-available/default
sudo nginx -t
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok

server {
        listen 80;

        server_name api.roge.nomoredomains.sbs;

        location / {
                proxy_pass http://localhost:3000;
                proxy_http_version 1.1;
                proxy_set_header Upgrade $http_upgrade;
                proxy_set_header Connection 'upgrade';
                proxy_set_header Host $host;
                proxy_cache_bypass $http_upgrade;
        }
}

server {
        listen 80;

        server_name api.roge.nomoredomains.sbs;

        location / {
                proxy_pass http://localhost:3000;
                proxy_http_version 1.1;
                proxy_set_header Upgrade $http_upgrade;
                proxy_set_header Connection 'upgrade';
                proxy_set_header Host $host;
                proxy_cache_bypass $http_upgrade;
        }
}
server {
        listen 80;

        server_name nikolaev.mesto.nomoredomains.sbs;
        root /home/roge97/react-mesto-api-full/frontend/build;

        location / {
                try_files $uri $uri/ /index.html;
        }
}



ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDE1iUl0xa/BCQmrfHGAEUAl89yzO8p9XWwhYS8/+yjG8NJWdW3HS6xEqVnazFd8nbbD3xZIQ8XqI9vD5Qk5rCE/UtV8wYxE6MaqbbuqYU4jMT+PrWCwgJ1exCZteI67Ew7LoHsoMKkTCI4tMDd/6oj+CDoXMyUIjTbLpQK9HUws0LlxHDPXFgLifvZx6nQ5FPlorzJwbSp8jgPYheQoN5LYwTOUZjSJyfp9Kw6g11bGJWNjsRq5SOP7icKdimfVCnLBV0udAVPWIs4hTbNmfLYJno3ZneV/tGcgedhpOuGuD6aXCUeYRugyB3Broi//32JL3oWJJJON1VcPoiyIeoiBiuzjMalRZ1LjRqg27tb2ntjVnMtFtsBu2T9Q/mxAF+hl4lqQ/d8uulSawlzz7UzQA2RS52bxOahlyPOg0/PcusgAZrMG0WAnePoQlT3/0Um0xoXYqCXEvEgqRGwQaxSdKC1zAOAI1h7SgM7pwlZhBDzwkMMpxQgBwgOxGk0fEckVKKxN3IvEP25tgF9IkYRztL/voMToHkMetLZsZDHK60YsydUKEUpNkWpEO7Fk4CbYgN3QaectTOC0jbYGeOaHfs04Ubs6wzDm2r6noTjZ50ar04TeDfW0TOuZBGrI+tXJiHuPb8r3o0k4K57RCDCt+CRvK8T4GNFV5aBIQvn+w== egornikolaev97@yandex.ru

scp -r ./build/* ssh roge97@51.250.66.19:/home/roge97/react-mesto-api-full/frontend


NODE_ENV = production
JWT_SECTRET = c48c42bd44460b7b293729797983e7cfc896304ebc5e734fcbdb43a5aef5f6e7

node -e "console.log(require('crypto').randomBytes(32).toString('hex'));"

tail -f /var/log/nginx/error.log
